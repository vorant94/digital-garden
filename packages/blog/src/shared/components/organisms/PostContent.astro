---
import { type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import { PostsService } from '../../PostsService';

interface Props {
  post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;

const { coverImage, tags, title, description } = post.data;

const { Content, remarkPluginFrontmatter } = await post.render();
---

<article class="prose flex flex-col">
  <h1>{title}</h1>

  <div class="flex gap-2 items-center">
    <span class="text-sm text-gray-500">
      {PostsService.formatPublishedAt(post)}
    </span>
    <span class="text-sm text-gray-500">&#x2022;</span>
    <span class="text-sm text-gray-500">
      {remarkPluginFrontmatter.minutesRead}
    </span>

    <div class="flex-1"></div>

    <ul class="hidden lg:flex list-none m-0 p-0 gap-1">
      {
        tags.map((tag) => (
          <li class="border border-gray-300 rounded-full text-xs font-light text-gray-500 m-0 py-0 px-2">
            #{tag}
          </li>
        ))
      }
    </ul>
  </div>

  {
    coverImage && (
      <div class="self-center">
        <Image
          src={coverImage}
          alt="cover image"
        />
      </div>
    )
  }

  <p><em>{description}</em></p>

  <div class="content">
    <Content />
  </div>
</article>

<style>
  .content :global(img) {
    margin-left: auto;
    margin-right: auto;
  }
</style>
