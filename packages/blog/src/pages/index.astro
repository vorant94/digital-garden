---
import '@fortawesome/fontawesome-free/css/fontawesome.css';
import '@fortawesome/fontawesome-free/css/solid.css';
import { PostsService } from '../shared/postsService.ts';
import { getCollection } from 'astro:content';
import _ from 'lodash';
import Layout from '../shared/components/templates/Layout.astro';
import Intro from '../shared/components/organisms/Intro.astro';
import PostList from '../shared/components/organisms/PostList.astro';
import PinnedPosts from '../shared/components/organisms/PinnedPosts.astro';

const allPosts = PostsService.sortEntries(await getCollection('posts'));
const [pinnedPosts, nonPinnedPosts] = _.partition(
  allPosts,
  (entry) => entry.data.isPinned,
);
---

<Layout>
  <PinnedPosts posts={pinnedPosts} />

  <Intro />

  <PostList posts={nonPinnedPosts} />
</Layout>
