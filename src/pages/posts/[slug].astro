---
import { getCollection, getEntry, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('posts');

  return posts.map(post => ({
    params: {slug: post.slug}
  }));
}

const { slug } = Astro.params;

// https://github.com/withastro/astro/issues/8450
// @ts-ignore
const post: CollectionEntry<'posts'> = await getEntry('posts', slug);
const { Content } = await post.render();

---

<Layout title={post.data.title}>
  <Content />
</Layout>

<style>
</style>
